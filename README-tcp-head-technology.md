### TCP报文段的首部格式
+ `TCP报文段首部`的前`20个字节`是`固定的`，后面的`4n`字节是根据需要而增加的选项(n是整数)，因此`TCP首部`的最小长度是`20字节`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-95.jpg)  

|首部字段|含义|
|------|------|
|源端口和目的端口|分别写入源端口号和目的端口号|
|序号|在一个TCP连接中传送的字节流中的每一个字节都按照顺序编号，整个要传送的字节流的起始序号必须在连接建立时设置，首部中的序号字段值则指的是本报文段所发送的数据的第一个字节的序号|
|确认号|是期望收到对方下一个报文段的第一个数据字节的序号，若确认号是N，则表明，到序号N-1为止的所有数据都已正确收到|
|数据偏移|它指出TCP报文段的数据起始位置距离TCP报文段的起始处有多远，这个字段实际上是指出TCP报文段的首部长度，由于首部中还有长度不确定的选项字段，因此数据偏移字段是必要的|
|保留|保留为今后使用，但目前应设置为0|
|紧急URG|当URG为1时，表明紧急指针字段有效，它告诉系统此报文段中有紧急数据，应尽快传递(相当于高优先级的数据)，而不要按原来的排队顺序来传送|
|确认ACK|仅当ACK为1时确认号字段才有效，当ACK为0时，确认号无效，TCP规定，在连接建立后所有传送的报文段都必须把ACK置为1|
|推送PSH|发送方TCP把PSH置为1，并立即创建一个报文段发送出去，接收方TCP收到PSH为1的报文段，就尽快的交付接收应用进程，而不再等到整个缓存都填满了后再向上交付|
|复位RST|当RST为1时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立运输连接；RST设置为1还用来拒绝一个非法的报文段或拒绝打开一个连接，RST也可称为重建位或重置位|
|同步SYN|在连接建立时用来同步序号，当SYN为1时而ACK为0时，表明这是一个连接请求报文段，对方若同意建立连接，则应在响应的报文段中使用SYN为1，ACK为1，因此，SYN为1就表示这是一个连接请求或连接接受报文|
|终止FIN|用来释放一个连接，当FIN为1时，表明此报文段的发送方的数据已发送完毕，并要求释放运输连接|
|窗口|窗口指的是发送本报文段的一方的接收窗口，窗口值告诉对方，从本报文段首部中的确认号算起，接收方目前允许对方发送的数据量，窗口值作为接收方让发送方设置其发送窗口的依据，窗口字段明确指出了现在允许对方发送的数据量，窗口值是经常在动态变化的|
|检验和|检验和字段检验的范围包括首部和数据这两部分，和UDP用户数据报一样，在计算检验和时，要在TCP报文段的前面加上12字节的伪首部|
|紧急指针|紧急指针仅在URG为1时才有意义，它指出本报文段中的紧急数据的字节数(紧急数据结束后就是普通数据)，即使窗口为0时也可发送紧急数据|
|选项|该选项中包括了最大报文段长度MSS选项、窗口扩大选项、时间戳选项、移位值S选项、选择确认选项等|
|填充|将首部填充为4个字节的整数倍|
