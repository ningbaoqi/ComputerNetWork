### TCP的拥塞控制
#### 拥塞控制的一般原理
+ 在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络的性能就要变坏，又叫做`拥塞`；所谓`拥塞控制`就是`防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不至于过载`，拥塞控制所要做的都有一个前提，就是`网络能够承受现有的网络负荷`，拥塞控制是一个`全局性的过程`；`流量控制往往指点对点通信量的控制`是个`端到端`的问题；
### 几种拥塞控制方法
#### 慢开始和拥塞避免
+ 发送方维持一个叫做`拥塞窗口cwnd`的状态变量，发送方控制拥塞窗口的原则是：只要网络没有出现拥塞，拥塞窗口就再增大一些，以便把更多的分组发送出去，但只有网络出现拥塞，拥塞窗口就减小一些，以减少注入到网络中的分组数；`慢开始`即`由小到大逐渐增大发送窗口`也就是说`由小到大逐渐增大拥塞窗口数值`；因此使用`慢开始`算法后，`每经过一个传输轮次，拥塞窗口cwnd就加倍`；为了防止拥塞窗口cwnd增长过大引起网络拥塞，还需要设置一个`慢开始门限ssthresh`状态变量，当`cwnd<ssthresh`时，使用上述的慢开始算法，当`cwnd>ssthresh`时，停止使用慢开始算法而改用拥塞避免算法，当`cwnd=ssthresh`时，既可使用慢开始算法，也可使用拥塞避免算法；`拥塞避免算法`的思路是让`拥塞窗口cwnd缓慢的增大`，即每经过一个往返时间`RTT`就把发送方的`拥塞窗口cwnd加1`，而不是加倍，这样拥塞窗口cwnd`按线性规律缓慢增长`，比慢开始算法的拥塞窗口增长速率缓慢很多；当出现网络阻塞时`cwnd改为1，ssthresh变为原来的一半`执行慢开始算法；使用该算法`使网络比较不容易出现阻塞`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-96.jpg)  
#### 快重传和快恢复
+ `快重传算法`首先要求接收方每收到一个`失序的报文段后`就立即发出重复确认(为的是使发送方及早知道有报文段没有到达对方)，而不要等待自己发送数据时才进行捎带确认，`快重传`算法规定，发送方只要`一连收到三个重复确认`就应当立即重传对方尚未收到的报文段；`快恢复算法`是把`cwnd值`设置为慢开始门限`ssthresh`减半后的数值，然后开始执行`拥塞避免算法`，使拥塞窗口缓慢的线性增大；`发送方的发送窗口一定不能超过对方给出的接受窗口值rwnd`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-97.jpg)
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-98.jpg) 
### 随机早期检测RED
+ `路由器`采用`随机早期检测RED`，使`路由器`的队列维持两个参数，即`队列长度最小门限THmin和最大门限THmax`每当一个分组到达时，`RED`就先计算`平均队列长度Lav`，若`平均队列长度小于最小门限`则把`新达到的分组放入队列进行排队`，若`平均队列长度`超过`最大门限`则把`新到达的分组丢弃`，若`平均队列长度`在`最小门限`和`最大门限`之间，则按照`某一概率p将新到达的分组丢弃`；经验表明，`使最大门限THmax等于最小门限THmin值的两倍是合适的`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-99.jpg) 
