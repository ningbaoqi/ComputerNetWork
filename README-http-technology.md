### 超文本传送协议HTTP
#### HTTP的操作过程
+ `HTTP协议`定义了浏览器(万维网客户端进程)怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器，`HTTP`是`面向事务的`应用层协议，它是万维网上能够可靠的交换文件的重要基础；在浏览器和服务器之间的请求和响应的交互，必须按照`规定的格式和遵循一定的规则`，这些`格式和规则`就是`超文本传送协议HTTP`；`HTTP`规定在`HTTP客户`与`HTTP服务器`之间的每次交互，都由一个`ASCII码串`构成的`请求`和一个类似的`通用因特网邮件扩充即类MIME`的`响应`组成，`HTTP报文`通常都使用`TCP`连接传送；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-200.jpg)   pic-200.jpg
+ `HTTP`使用了面向连接的`TCP`作为运输层协议，保证了数据的可靠传输，`HTTP`不必考虑数据在传输过程中被丢弃后又怎样被重传，但是，`HTTP`协议`本身是无连接的`，就是说，虽然`HTTP`使用了`TCP`连接，但通信的双方在交换`HTTP报文`之前不需要先建立`HTTP连接`；`HTTP`协议的`无状态的`，也就是说，同一个客户第二次访问同一个服务器上的页面时，服务器的响应与第一次被访问时的相同；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-201.jpg)   pic-201.jpg
+ 万维网客户把`HTTP请求报文`作为`三次握手`的`第三个报文`的数据发送给万维网服务器，服务器收到HTTP请求报文后，就把所请求的文档作为响应报文返回给客户；`HTTP`使用了`持续连接`，持续连接就是万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户和该浏览器可以继续在这条连接上传送后续的`HTTP请求报文和响应报文`，这并不局限于传送同一个页面上链接的文档，而是只要这些文档都在同一个服务器上就行；

|持续连接两种工作方式|说明|
|------|------|
|非流水线方式|是客户在收到前一个响应后才能发出下一个请求，因为服务器在发送完一个对象后，其TCP连接就处于空闲状态，浪费了服务器资源|
|流水线方式|是客户在收到HTTP的响应报文之前就能接着发送新的请求报文，于是一个接一个的请求报文到达服务器后，服务器就可持续发回响应报文|

#### 代理服务器
+ `代理服务器`是一种网络实体，它又称为`万维网高速缓存`，代理服务器把最近的一些请求和响应暂存在`本地磁盘`中，当新请求到达时，若代理服务器发现这个请求与暂存的请求相同，就返回暂存的响应；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-202.jpg)   pic-202.jpg
#### HTTP的报文结构
+ `HTTP`是`面向文本的`，因此在报文中的每一个字段都是一些`ASCII码串`，因而各个字段的长度都是`不确定的`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-203.jpg)   pic-203.jpg

|字段|说明|
|------|------|
|开始行|用于区分是请求报文还是响应报文，在请求报文中的开始行叫做请求行，而在响应报文中的开始行叫做状态行，最后的CR和LF分别代表回车和换行|
|首部行|用来说明浏览器、服务器和报文主体的一些信息，每一行在结束的地方都要有回车和换行，整个首部行结束时，还有一空行将首部和后面的实体主体分开|
|实体主体|在请求报文中一般都不用这个字段，而在响应报文中也可能没有这个字段|

#### 请求报文

|请求行字段|说明|
|------|------|
|方法|就是对所请求的对象进行的操作，这些方法实际上也就是一些命令；OPTION：请求一些选项的信息；GET：请求读取由URL所标志的信息；HEAD：请求读取由URL所标志的信息的首部；POST：给服务器添加信息；PUT：在指明的URL下存储一个文档；DELETE：删除指明的URL所标志的资源；TRACE：用来进行环回测试的请求报文；CONNECT：用于代理服务器|
|URL|请求资源的URL|
|版本|HTTP的版本|

```
//请求报文的例子 GET http://www,tsinghua.edu.cn/chn/yxsz/index.htm HTTP/1.1

GET /chn/yxsz/index.htm HTTP/1.1       //请求行使用了相对URL

Host：www.tsinghua.edu.cn       //此行是首部行的开始，这行给出主机的域名

Connection：close       //告诉服务器发送完请求的文档后就可释放连接

User-Agent：Mozilla/5.0       //表明用户代理是使用Netscape浏览器

Accept-Language：cn       //表示用户希望优先得到中文版本的文档
```
#### 响应报文

|状态行字段|说明|
|------|------|
|版本|HTTP的版本|
|状态码|状态码；状态码都是三位数字的如：1xx：表示通知信息的，如请求受到了或正在进行处理；2xx：表示成功，如接受或知道了；3xx：表示重定向，如要完成请求还必须采取进一步的行动；4xx：表示客户的差错，如请求中有错误的语法或不能完成；5xx：表示服务器的差错，如服务器失效无法完成请求|
|短语|解释状态码的简单短语|

#### 在服务器上存放用户的信息
+ `HTTP中使用了Cookie`，对`Cookie`进行了定义，规定万维网站点可以使用`Cookie`来`跟踪用户`，在这里`Cookie`表示在HTTP服务器和客户之间传递的状态信息；`Cookie`是这样工作的，当用户A浏览某个使用`Cookie`的网站时，该网站的服务器就为`A`产生一个`唯一`的`识别码`，并以此作为索引在服务器的后端数据库中产生一个项目，接着在给`A`的`HTTP响应报文`中添加一个叫做`Set-Cookie`的首部行，这里的`首部字段名`就是`Set-Cookie`，而后面的`值`就是赋予该用户的`识别码`如：`Set-Cookie：12345678`，当`A`收到这个响应时，其浏览器就在它管理的特定`Cookie`文件中添加一行，其中包括这个服务器的`主机名`和`Set-Cookie`后面给出的`识别码`，当`A`继续浏览这个网站时，每发送一个`HTTP`请求报文，其浏览器就会从其`Cookie文件`中取出这个网站的`识别码`，并放到`HTTP请求报文`的`Cookie`首部行中如：`Cookie：12345678`，于是，这个网站就能够跟踪用户`12345678`在该网站的活动；
### http协议特点

|http协议特点|
|------|
|`简单快速`传送请求方法(get、post)和路径就可以获取需要的数据|
|`无连接`指的是`限制每次连接只处理一个请求`，`服务器处理完客户的请求之后，会受到客户端的应答，然后断开这个连接`|
|`无状态`指的是`这个协议对以前处理的事物没有记忆能力`|
