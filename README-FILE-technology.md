### 文件传送协议
### FTP概述
+ `文件传送协议FTP`是因特网上使用最广泛的文件传送协议；`FTP`提供`交互式`的访问，允许客户指明`文件的类型与格式`(如指明是否使用ASCII码)，并允许文件具有`存根权限`(如访问文件的用户必须经过授权，并输入有效的口令)，`FTP`屏蔽了各计算机系统的细节，因而适合于在`异构网络中`任意计算机之间传送文件；

|文件共享协议|说明|
|------|------|
|基于TCP的FTP和基于UDP的简单文件传送协议TFTP|是文件共享协议的一大类，即复制整个文件，特点是：若要存取一个文件，就必须先获得一个本地的文件副本，如果要修改文件，只能对文件的副本进行修改，然后再将修改后的文件副本传回到原节点|
|联机访问|是文件共享协议中的另一大类，联机访问意味着允许多个程序同时对一个文件进行存取，用户不需要调用一个特殊的客户进程，而是由操作系统提供对远地共享文件进行访问的服务，就如同对本地文件的访问一样，操作系统中的文件系统则提供对共享文件的透明存取，透明存取的优点是：将原来用于处理本地文件的应用程序用来处理远地文件时，不需要对该应用程序做明显的改动，属于文件共享协议的有网络文件系统NFS|

### FTP的基本工作原理
+ `文件传送协议FTP`只提供文件传送的一些基本的服务，它使用`TCP`可靠的运输服务，`FTP`的主要功能是`减少或消除在不同操作系统下处理文件的不兼容性`；`FTP`使用`客户服务器`方式，一个`FTP服务器`进程可同时为多个`客户`进程提供服务，`FTP`的服务器进程由两大部分组成：`一个主进程，负责接受新的请求`，另有若干个`从属进程，负责处理单个请求`；

|主进程的工作步骤|
|------|
|打开熟知端口(端口号为21)，使客户进程能够连接上|
|等待客户进程发出连接请求|
|启动从属进程来处理客户进程发来的请求，从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其他一些子进程|
|回到等待状态，继续接受其他客户进程发来的请求，主进程与从属进程的处理是并发的进行|
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-160.jpg)   pic-160.jpg
+ 在进行文件传输时，`FTP的客户和服务器`之间要建立`两个并行`的`TCP`连接，`控制连接`和`数据连接`，`控制连接`在整个会话期间一直保持运行，`FTP客户`所发出的传送请求，通过`控制连接`发送给`服务器端`的`控制进程`，但`控制连接`并不是用来传送文件的，`实际用于传输文件的是数据连接`，`服务器端`的`控制进程`在接收到`FTP客户端`发送来的文件传输请求后就创建`数据传送进程`和`数据连接`，用来连接客户端和服务器端的数据传送进程；`数据传送进程实际完成文件的传送`，在传送完毕后关闭数据传送连接并结束运行；`FTP并非对所有的数据传输都是最佳的`；`网络文件系统NFS`采用另一个思路：`NFS允许应用进程打开一个远地文件，并能在该文件的某一个特定的位置上开始读写数据，在网络上传送的只是少量的修改数据`；

### 简单文件传送协议TFTP
+ `简单文件传送协议TFTP`它是一个很小且易于实现的文件传送协议；虽然`TFTP`也使用`客户---服务器方式`，但它使用`UDP数据报`，因此`TFTP`需要有自己的`差错改正措施`，`TFTP`只支持`文件传输而不支持交互`；`TFTP`的优点主要有两个：一、`TFTP可用于UDP环境`；二、`TFTP代码所占的内存较小`；

|TFTP的主要特点|
|------|
|每次传送的数据报文中有512字节的数据，但最后一次可不足512字节|
|数据报文按序编号，从1开始|
|支持ASCII码或二进制传送|
|可对文件进行读或写|
|使用很简单的首部|

+ `TFTP`的工作很像`停止等待协议`，发送完一个文件块后就等待对方的确认，确认后应指明所确认的`块编号`；
