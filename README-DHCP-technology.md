### 动态主机配置协议DHCP
+ 在协议软件中给参数赋值的动作叫做`协议配置`；一个协议软件在使用之前必须是已正确配置的，具体的配置信息有哪些则取决于协议桟，例如：连接到因特网上的计算机的协议软件需要配置的项目包括：`IP地址`、`子网掩码`、`默认路由器的IP地址`、`域名服务器的IP地址`；用人工进行协议配置不方便，应当采用`自动协议配置`的方法，现在广泛使用的是`动态主机配置协议DHCP`它提出了一种机制，称为`即插即用连网`，这种机制允许一台计算机加入新的网络和获取IP地址而不用手动参与；`DHCP`对运行客户软件和服务器软件的计算机都适用，`DHCP`给运行`服务器软件而位置固定`的计算机指派一个`永久地址`，而`当该计算机重新启动时地址不改变`；`DHCP`使用`客户---服务器`方式，需要`IP地址`的主机在启动时就向`DHCP服务器`广播发送`发现报文`(将目的IP地址设置为全1，即255.255.255.255)，这时该主机就成为了`DHCP`客户，这个主机目前`还没有自己的IP地址`，因此它将`IP数据报`的`源IP地址设置为全0`，`DHCP服务器`先在其数据库中查找该计算机的配置信息，若找到，则返回找到的信息，若找不到，则从服务器的IP地址池中取一个地址分配给该计算机，DHCP服务器的回答报文叫做`提供报文`，表示`提供`了IP地址等配置信息；为了减少`DHCP服务器的数量`，现在是使每一个网络至少有一个`DHCP中继代理(通常是一台路由器)`，它配置了`DHCP服务器的IP地址信息`，当`DHCP中继代理`收到主机A以`广播`形式发送的发现报文后，就以`单播`方式向`DHCP服务器`转发此报文，并等待其回答，收到`DHCP服务器`回答的提供报文后，`DHCP中继代理`再把此提供报文发回给主机`A`；

![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-140.jpg)   pic-140.jpg
+ 实际上，`DHCP报文`只是`UDP用户数据报`的数据，它还要加上`UDP首部`，`IP数据报首部`，以及以太网的`MAC帧的首部和尾部`后，才能在链路上传送；`DHCP服务器`分配给`DHCP客户`的`IP地址`是`临时的`，因此`DHCP客户`只能在一段有限的时间内使用这个分配到的`IP地址`；
![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-141.jpg)   pic-141.jpg
+ 被选择的`DHCP服务器`发送确认报文`DHCPACK`，从这时起，`DHCP客户`就可以使用这个`IP地址`了，这种状态叫做`已绑定状态`；在`Windows系统`下的控制面板中，若选择`自动获得IP地址`和`自动获得DNS服务器地址`就表示是使用`DHCP协议`；
