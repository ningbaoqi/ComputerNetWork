### 网际控制报文协议ICMP
+ `ICMP`允许主机或路由器报告差错情况和提供有关异常情况的报告；`ICMP`报文作为`IP层数据报`的`数据`，加上数据报的`首部`，组成`IP数据报`发送出去；

![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/pic-40.jpg)   pic-40.jpg

### ICMP报文的种类

|ICMP报文种类|类型的值|ICMP报文的类型|说明|
|------|------|------|------|
|ICMP差错报告报文|3|终点不可达|当路由器或主机不能交付数据报时就向源点发送终点不可达报文|
|ICMP差错报告报文|4|源点抑制|当路由器或主机由于拥塞而丢掉数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢|
|ICMP差错报告报文|11|时间超过|当路由器收到生存时间而零的数据报时，除丢弃该数据报外，还要向源点发送时间超时报文，当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文|
|ICMP差错报告报文|12|参数问题|当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文|
|ICMP差错报告报文|5|改变路由|路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器|
|询问报文|8或0|回送请求或回答|是由主机或路由器向一个特定的目的主机发出的询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文，这种询问报文用来测试目的站是否可达以及了解其有关状态
|询问报文|13或14|时间戳请求或回答|是请某个主机或路由器回答当前的日期和时间，时间戳请求与回答可用来进行时钟同步和测量时间|

+ `ICMP`报文的`代码字段`是为了进一步区分某种类型中的几种不同的情况；`检验和字段`用来检验整个`ICMP报文`；
