### 协议与划分层次
#### 具有五层协议的体系结构
|网络协议主要的三个要素|
|-------|
|语法：即数据与控制信息的结构或格式|
|语义：即需要发出任何控制信息，完成何种动作以及做出何种响应|
|同步：即事件实现顺序的详细说明|

![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/c42465a3-820d-42a2-a574-0bd529a7c933.jpg)

|层次|说明|
|------|------|
|应用层|应用层的任务是通过应用进程间的交互来完成特定网络应用|
|运输层|运输层的任务就是负责向两个主机中进程之间的通信提供通用的数据传输服务；运输层主要使用两个协议：`传输控制协议TCP`---提供面向连接的、可靠的数据传输服务，其数据传输的单位是`报文段`；`用户数据报协议UDP`---提供无连接的、尽量大努力的数据传输服务(不保证数据传输的可靠性)，其数据传输的单位是`用户数据报`|
|网络层|网络层负责为分组交换网上的不同主机提供通信服务，在发送数据时，网络层把运输层产生的报文段或用户数据报封装成`分组`或`包`进行传送，网络层使用`IP协议`，因此分组也叫做`IP数据报`，或简称为`数据报`，网络层的另一个任务就是要选择合适的路由，使源主机运输层传递下来的分组能够通过网络中的路由器找到目的主机；因特网主要的网络层协议是`无连接的网络协议IP`和许多种路由选择协议|
|数据链路层|数据链路层简称为链路层，两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议，两个相邻结点之间传送数据时，数据链路层将网络层交下来的IP数据报`组装成帧`，在两个相邻结点间的链路上传送`帧`，每一帧包括`数据`和必要的`控制信息`如`同步信息、地址信息、差错控制等`；控制信息还使接收端能够检测到所收到的帧中有无差错，如发现有差错，数据链路层就简单的丢弃这个出了差错的帧，以免继续在网络中传送下去白白浪费网络资源，如果需要改正数据在数据链路层传输时出现的差错(这就是说，数据链路层不仅要检测，而且要纠错)，那么就要采用可靠传输协议来纠正出现的差错，这种方式会使数据链路层的协议复杂些|
|物理层|在物理层上所传数据的单位是比特，发送方发送`1`或者`0`时，接收方应当收到`1`或`0`，而不是`0`或`1`；请注意，传递信息所利用的一些物理媒体如双绞线、同轴电缆、光缆、无线信道等，并不是在物理层协议之间而是在物理层协议的下面|

![image](https://github.com/ningbaoqi/ComputerNetWork/blob/master/gif/c6004564-5213-41aa-9d12-27c5e9b1f9c8.jpg)

+ 当这一串的比特流离开`主机1`的物理层经网络的物理媒介传送到`路由器`时，就从路由器的第1层(物理层)依次上升到第3层(网络层)，每一层都是根据控制信息进行必要的操作，然后将控制信息剥去，将该层剩下的数据单元上交给更高的一层，当分组上升到第3层时，就根据首部中的目的地址查找路由器中的路由表，找出转发分组的接口，然后往下传送到第2层链路层，加上新的首部和尾部后，再到最下面的第一层，然后在物理媒介上把每一个比特发送出去；当这一串的比特流离开路由器到达目的站主机2时，就从主机2的第一层按照上面讲过的方式，依次上升到第五层，最后，把应用进程`AP1`发送的数据交给目的站的应用进程`AP2`；

#### 实体、协议、服务和服务访问点
+ `实体`这一较为抽象的名词表示任何可发送或接收信息的硬件或软件进程，在许多情况下，实体就是一个特定的软件模块；`协议`是控制两个对等实体(或多个实体)进行通信的规则的集合；在协议的控制下，两个对等实体之间的通信使得本层能够向上一层提供服务，要实现本层协议，还需要使用下面一层所提供的服务；使用本层服务的实体只能看到服务而无法看到下面的协议，下面的协议对上面的实体是透明的；协议是`水平的`，即协议是控制对等实体之间通信的规则，但服务是`垂直的`即服务是由下层向上层通过层间接口提供的；在同一系统中相邻两层的实体进行交互(即交换信息)的地方，通常称为`服务访问点`；
